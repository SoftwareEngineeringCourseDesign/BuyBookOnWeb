{"version":3,"sources":["webpack:///./src/components/OrderDetail.vue?fd9b","webpack:///src/components/OrderDetail.vue","webpack:///./src/components/OrderDetail.vue?0151","webpack:///./src/components/OrderDetail.vue","webpack:///./src/components/OrderDetail.vue?c302"],"names":["module","exports","__webpack_require__","push","i","OrderDetail","components","iHeader","Header","name","data","_this","this","order","orderList","book","columns","title","key","render","h","params","attrs","height","src","row","msg","img","columns2","GetStepMessage","step","style","text-align","getContent","user","score","created","_this2","$http","get","$store","state","auth","authUser","token","then","r","catch","e","iview_default","a","Notice","error","$router","$route","order_id","id","r2","b","category","price","toDecimal2","number","sum","discount","cover","createTime","moment_default","unix","created_at","format","username","e2","response","status","document","window","title_suf","computed","methods","s","x","Math","round","toString","rs","indexOf","length","_this3","button","role","alias","props","type","on","click","Pay","$Message","info","Receive","value","show-text","count","allow-half","input","margin-top","margin-bottom","Star","Send","_this4","put","$Notice","message","_this5","_this6","_this7","components_OrderDetail","_vm","_h","$createElement","_c","_self","_v","staticStyle","staticClass","border","$event","back","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","content","locals"],"mappings":"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","file":"static/js/17.4fbf365f0fe47912d7ee.js","sourcesContent":["exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".back[data-v-2eced04e]{margin:50px;text-align:right}.order[data-v-2eced04e]{width:90%;margin:50px}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-2eced04e\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./node_modules/iview-loader??ref--1-1!./src/components/OrderDetail.vue\n// module id = Cn2j\n// module chunks = 17","<template>\n  <div>\n    <i-header></i-header>\n    <h1 style=\"text-align: center; margin-top: 20px;\">订单详情</h1>\n    <div class=\"order\">\n      <h2 style=\"margin-bottom: 10px;\">订单内容</h2>\n      <Table\n        border\n        :columns=\"columns\"\n        :data=\"book\"\n      >\n      </Table>\n      <h2 style=\"margin-top: 20px;\">订单信息</h2>\n      <Table\n        border\n        :columns=\"columns2\"\n        :data=\"orderList\"\n      >\n      </Table>\n    </div>\n    <div class=\"back\">\n      <Button type=\"primary\" @click=\"$router.back()\">返回上一页</Button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport iHeader from './Header.vue'\nimport moment from 'moment'\nimport iView from 'iview'\nexport default {\n  components: {\n    iHeader\n  },\n  name: '',\n  data () {\n    return {\n      order: [],\n      orderList: [],\n      book: [],\n      columns: [\n        {\n          title: '购买书籍',\n          key: 'msg',\n          render: (h, params) => {\n            return h('div', [\n              h('img', {\n                attrs: {\n                  height: '100px',\n                  src: params.row.msg.img\n                }\n              }),\n              h('b', params.row.msg.name)\n            ])\n          }\n        },\n        {\n          title: '分类',\n          key: 'category'\n        },\n        {\n          title: '出版商',\n          key: 'publisher'\n        },\n        {\n          title: '单价',\n          key: 'price'\n        },\n        {\n          title: '数量',\n          key: 'number'\n        },\n        {\n          title: '优惠方式',\n          key: 'discount'\n        },\n        {\n          title: '总金额',\n          key: 'sum'\n        }\n      ],\n      columns2: [\n        {\n          title: '订单编号',\n          key: 'id'\n        },\n        {\n          title: '下单用户',\n          key: 'username'\n        },\n        {\n          title: '总金额',\n          key: 'sum'\n        },\n        {\n          title: '创建时间',\n          key: 'createTime'\n        },\n        {\n          title: '订单状态',\n          key: 'step',\n          render: (h, params) => {\n            return h('div', this.GetStepMessage(params.row.step))\n          }\n        },\n        {\n          title: '操作',\n          render: (h, params) => {\n            return h('div', {\n              style: {\n                'text-align': 'center'\n              }\n            }, this.getContent(h))\n          }\n        }\n      ],\n      user: [],\n      score: 0\n    }\n  },\n  created: function () {\n    this.$http.get('user/' + this.$store.state.auth.authUser, {params: {token: this.$store.state.auth.token}})\n      .then((r) => {\n        this.user = r.data\n      })\n      .catch((e) => {\n        iView.Notice.error({title: '暂未登录'})\n        this.$router.push({ name: 'Login' })\n      })\n    this.$http.get('order/' + this.$route.params.order_id, { params: {\n      'token': this.$store.state.auth.token\n    }})\n      .then(r => {\n        this.order = r.data\n        this.$http.get('book/' + this.order.book.id)\n          .then(r2 => {\n            let b = r2.data\n            b.category = b.category.name\n            b.price = this.toDecimal2(b.price / 100)\n            b.number = this.order.number\n            b.sum = this.toDecimal2(this.order.price / 100)\n            b.discount = '无优惠'\n            b.msg = {\n              img: r2.data.cover,\n              name: r2.data.name\n            }\n            this.book = [b]\n            this.order.sum = this.toDecimal2(this.order.price / 100)\n            this.order.createTime = moment.unix(+this.order.created_at).format('YYYY-MM-DD')\n            this.order.username = this.order.user.name\n            this.orderList = [this.order]\n          })\n          .catch(e2 => {\n            switch (e2.response.status) {\n              case 401:\n                iView.Notice.error({title: '您未登录'})\n                this.$router.push({ name: 'Login' })\n                break\n              case 403:\n                iView.Notice.error({title: '您没有权限'})\n                this.$router.push({ name: 'UserInfo' })\n                break\n              case 404:\n                iView.Notice.error({ title: '找不到该书' })\n                this.$router.push({ name: 'UserInfo' })\n            }\n          })\n      })\n      .catch(e => {\n        switch (e.response.status) {\n          case 401:\n            iView.Notice.error({title: '您未登录'})\n            this.$router.push({ name: 'Login' })\n            break\n          case 403:\n            iView.Notice.error({title: '您没有权限'})\n            this.$router.push({ name: 'UserInfo' })\n            break\n          case 404:\n            iView.Notice.error({ title: '找不到该订单' })\n            this.$router.push({ name: 'UserInfo' })\n        }\n      })\n    document.title = '订单详情' + window.title_suf\n  },\n  computed: {\n  },\n  methods: {\n    GetStepMessage (step) {\n      let s = ''\n      switch (step) {\n        case 1:\n          s = '未支付'\n          break\n        case 2:\n          s = '待发货'\n          break\n        case 3:\n          s = '已发货'\n          break\n        case 4:\n          s = '已收货'\n          break\n        case 5:\n          s = '已评分'\n          break\n        default:\n          s = '未知状态'\n      }\n      return s\n    },\n    toDecimal2: function (x) {\n      let f = Math.round(x * 100) / 100\n      let s = f.toString()\n      let rs = s.indexOf('.')\n      if (rs < 0) {\n        rs = s.length\n        s += '.'\n      }\n      while (s.length <= rs + 2) {\n        s += '0'\n      }\n      return '￥' + s\n    },\n    getContent (h) {\n      let button\n      if (this.user.role.alias === 'root') button = []\n      else if (this.user.role.alias === 'person') {\n        if (this.order.step === 1) {\n          button = [\n            h('Button', {\n              props: {\n                type: 'error'\n              },\n              on: {\n                click: () => {\n                  this.Pay()\n                }\n              }\n            }, '立即支付')\n          ]\n        } else if (this.order.step === 2) {\n          button = [\n            h('Button', {\n              props: {\n                type: 'error'\n              },\n              on: {\n                click: () => {\n                  this.$Message.info('已通知商家尽快发货')\n                }\n              }\n            }, '催促商家发货')\n          ]\n        } else if (this.order.step === 3) {\n          button = [\n            h('Button', {\n              props: {\n                type: 'error'\n              },\n              on: {\n                click: () => {\n                  this.Receive()\n                }\n              }\n            }, '确认收货')\n          ]\n        } else if (this.order.step === 4) {\n          button = [\n            h('Rate', {\n              props: {\n                value: this.score,\n                'show-text': false,\n                count: 5,\n                'allow-half': true\n              },\n              on: {\n                input: (value) => {\n                  this.score = value\n                }\n              }\n            }),\n            h('Button', {\n              props: {\n                type: 'primary'\n              },\n              style: {\n                'margin-top': '10px',\n                'margin-bottom': '10px'\n              },\n              on: {\n                click: () => {\n                  this.Star()\n                }\n              }\n            }, '提交评分')\n          ]\n        } else if (this.order.step === 5) {\n          button = [\n            h('Button', {\n              props: {\n                type: 'primary'\n              },\n              on: {\n                click: () => {\n                  this.$Message.info('暂未开放评论功能')\n                }\n              }\n            }, '追加评论')\n          ]\n        }\n      } else if (this.user.role.alias === 'bookseller') {\n        if (this.order.step === 1) {\n          button = [\n            h('Button', {\n              props: {\n                type: 'error'\n              },\n              on: {\n                click: () => {\n                  this.$Message.info('已提醒用户付款')\n                }\n              }\n            }, '提醒用户付款')\n          ]\n        } else if (this.order.step === 2) {\n          button = [\n            h('Button', {\n              props: {\n                type: 'error'\n              },\n              on: {\n                click: () => {\n                  this.Send()\n                }\n              }\n            }, '确认发货')\n          ]\n        } else if (this.order.step === 3) {\n          button = [\n            h('Button', {\n              props: {\n                type: 'error'\n              },\n              on: {\n                click: () => {\n                  this.$Message.info('已提醒用户收货')\n                }\n              }\n            }, '提醒用户收货')\n          ]\n        } else if (this.order.step === 4) {\n          button = [\n            h('Button', {\n              props: {\n                type: 'error'\n              },\n              on: {\n                click: () => {\n                  this.$Message.info('已提醒用户评分')\n                }\n              }\n            }, '提醒用户评分')\n          ]\n        } else if (this.order.step === 5) {\n          button = [\n            h('Button', {\n              props: {\n                type: 'primary'\n              },\n              on: {\n                click: () => {\n                  this.$Message.info('暂未开放评论功能')\n                }\n              }\n            }, '查看评论')\n          ]\n        }\n      } else button = []\n      return button\n    },\n    Pay () {\n      this.$http.put('order/' + this.order.id + '/pay', {\n        'token': this.$store.state.auth.token\n      })\n        .then(r => {\n          this.$http.get('order/' + this.$route.params.order_id, { params: {\n            'token': this.$store.state.auth.token\n          }})\n            .then(r2 => {\n              this.order.step = r2.data.step\n              this.$Notice.info({ title: '支付成功' })\n            })\n            .catch(e => {\n              switch (e.response.status) {\n                case 401:\n                  iView.Notice.error({title: '您未登录'})\n                  this.$router.push({ name: 'Login' })\n                  break\n                case 403:\n                  iView.Notice.error({title: '您没有权限'})\n                  this.$router.push({ name: 'UserInfo' })\n                  break\n                case 404:\n                  iView.Notice.error({ title: '找不到该订单' })\n                  this.$router.push({ name: 'UserInfo' })\n              }\n            })\n        })\n        .catch(e => {\n          switch (e.response.status) {\n            case 404:\n              iView.Notice.error({ title: '找不到该订单' })\n              break\n            case 402:\n              iView.Notice.error({ title: '该订单已支付成功' })\n              break\n            case 403:\n              iView.Notice.error({ title: e.response.data.message })\n              break\n          }\n        })\n    },\n    Receive () {\n      this.$http.put('order/' + this.order.id + '/receive', {\n        'token': this.$store.state.auth.token\n      })\n        .then(r => {\n          this.$http.get('order/' + this.$route.params.order_id, { params: {\n            'token': this.$store.state.auth.token\n          }})\n            .then(r2 => {\n              this.order.step = r2.data.step\n              this.$Notice.info({ title: '成功确认收货' })\n            })\n            .catch(e => {\n              switch (e.response.status) {\n                case 401:\n                  iView.Notice.error({title: '您未登录'})\n                  this.$router.push({ name: 'Login' })\n                  break\n                case 403:\n                  iView.Notice.error({title: '您没有权限'})\n                  this.$router.push({ name: 'UserInfo' })\n                  break\n                case 404:\n                  iView.Notice.error({ title: '找不到该订单' })\n                  this.$router.push({ name: 'UserInfo' })\n              }\n            })\n        })\n        .catch(e => {\n          switch (e.response.status) {\n            case 404:\n              iView.Notice.error({ title: '找不到该订单' })\n              break\n            case 402:\n              iView.Notice.error({ title: '该订单已支付成功' })\n          }\n        })\n    },\n    Star () {\n      this.$http.put('order/' + this.order.id + '/evaluate', {\n        'token': this.$store.state.auth.token,\n        'score': Math.round(this.score * 2)\n      })\n        .then(r => {\n          this.$http.get('order/' + this.$route.params.order_id, { params: {\n            'token': this.$store.state.auth.token\n          }})\n            .then(r2 => {\n              this.order.step = r2.data.step\n              this.$Notice.info({ title: '成功评分' })\n            })\n            .catch(e => {\n              switch (e.response.status) {\n                case 401:\n                  iView.Notice.error({title: '您未登录'})\n                  this.$router.push({ name: 'Login' })\n                  break\n                case 403:\n                  iView.Notice.error({title: '您没有权限'})\n                  this.$router.push({ name: 'UserInfo' })\n                  break\n                case 404:\n                  iView.Notice.error({ title: '找不到该订单' })\n                  this.$router.push({ name: 'UserInfo' })\n              }\n            })\n        })\n        .catch(e => {\n          switch (e.response.status) {\n            case 404:\n              iView.Notice.error({ title: '找不到该订单' })\n              break\n            case 402:\n              iView.Notice.error({ title: '该订单已支付成功' })\n          }\n        })\n    },\n    Send () {\n      this.$http.put('order/' + this.order.id + '/send', {\n        'token': this.$store.state.auth.token\n      })\n        .then(r => {\n          this.$http.get('order/' + this.$route.params.order_id, { params: {\n            'token': this.$store.state.auth.token\n          }})\n            .then(r2 => {\n              this.order.step = r2.data.step\n              this.$Notice.info({ title: '发货成功' })\n            })\n            .catch(e => {\n              switch (e.response.status) {\n                case 401:\n                  iView.Notice.error({title: '您未登录'})\n                  this.$router.push({ name: 'Login' })\n                  break\n                case 403:\n                  iView.Notice.error({title: '您没有权限'})\n                  this.$router.push({ name: 'UserInfo' })\n                  break\n                case 404:\n                  iView.Notice.error({ title: '找不到该订单' })\n                  this.$router.push({ name: 'UserInfo' })\n              }\n            })\n        })\n        .catch(e => {\n          switch (e.response.status) {\n            case 404:\n              iView.Notice.error({ title: '找不到该订单' })\n              break\n          }\n        })\n    }\n  }\n}\n</script>\n\n<style scoped>\n  .back {\n    margin: 50px;\n    text-align: right;\n  }\n  .order {\n    width: 90%;\n    margin: 50px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/OrderDetail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('i-header'),_vm._v(\" \"),_c('h1',{staticStyle:{\"text-align\":\"center\",\"margin-top\":\"20px\"}},[_vm._v(\"订单详情\")]),_vm._v(\" \"),_c('div',{staticClass:\"order\"},[_c('h2',{staticStyle:{\"margin-bottom\":\"10px\"}},[_vm._v(\"订单内容\")]),_vm._v(\" \"),_c('Table',{attrs:{\"border\":\"\",\"columns\":_vm.columns,\"data\":_vm.book}}),_vm._v(\" \"),_c('h2',{staticStyle:{\"margin-top\":\"20px\"}},[_vm._v(\"订单信息\")]),_vm._v(\" \"),_c('Table',{attrs:{\"border\":\"\",\"columns\":_vm.columns2,\"data\":_vm.orderList}})],1),_vm._v(\" \"),_c('div',{staticClass:\"back\"},[_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.$router.back()}}},[_vm._v(\"返回上一页\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2eced04e\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./node_modules/iview-loader??ref--1-1!./src/components/OrderDetail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!vue-style-loader!css-loader?minimize!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2eced04e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!../../node_modules/iview-loader/index.js??ref--1-1!./OrderDetail.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!../../node_modules/iview-loader/index.js??ref--1-1!./OrderDetail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!../../node_modules/iview-loader/index.js??ref--1-1!./OrderDetail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2eced04e\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!../../node_modules/iview-loader/index.js??ref--1-1!./OrderDetail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2eced04e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/OrderDetail.vue\n// module id = null\n// module chunks = ","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?minimize!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2eced04e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!../../node_modules/iview-loader/index.js??ref--1-1!./OrderDetail.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"29caedce\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-style-loader!./node_modules/css-loader?minimize!./node_modules/vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-2eced04e\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/vue-loader/lib/selector.js?type=styles&index=0!./node_modules/iview-loader??ref--1-1!./src/components/OrderDetail.vue\n// module id = a0Rh\n// module chunks = 17"],"sourceRoot":""}